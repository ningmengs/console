{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["/**\n * @author xiaojue\n * @author dujia\n * @date 20161027\n */\n\nimport './css/console.css';\nimport html from './template/console.html';\n\nclass eventsMap {\n    constructor() {\n        this.delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n        if (this.events) this._bindEventMap();\n    }\n    isFunction(obj) {\n        return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n    $(selector) {\n        return document.querySelector(selector);\n    }\n    _bindEventMap() {\n        for (var key in this.events) {\n            if (this.events.hasOwnProperty(key)) {\n                var method = this.events[key];\n                if (!this.isFunction(method)) {\n                    method = this[method];\n                }\n                if (!method) {\n                    continue;\n                }\n                var match = key.match(this.delegateEventSplitter),\n                    type = match[1],\n                    selector = match[2];\n                this.$(selector).addEventListener(type, method.bind(this));\n            }\n        }\n    }\n}\n\nclass domUtils extends eventsMap {\n    constructor() {\n        super();\n    }\n    createElement(tag, attrs, content) {\n        var el = document.createElement(tag),\n            i;\n        for (i in attrs) {\n            if (attrs.hasOwnProperty(i)) {\n                el.setAttribute(i, attrs[i]);\n            }\n        }\n        if (content) {\n            this.html(el, content);\n        }\n        return el;\n    }\n    show(...eles) {\n        eles.forEach((ele) => {\n            ele.style.display = 'block';\n        });\n        return this;\n    }\n    hide(...eles) {\n        eles.forEach((ele) => {\n            ele.style.display = 'none';\n        });\n        return this;\n    }\n    append(parent, ...eles) {\n        eles.forEach((ele) => {\n            parent.appendChild(ele);\n        });\n        return this;\n    }\n    _put(string, type, ...eles) {\n        eles.forEach((ele) => {\n            if (type) {\n                if (typeof ele.textContent === 'string') {\n                    ele.textContent = string;\n                } else {\n                    ele.innerText = string;\n                }\n            } else {\n                ele.innerHTML = string;\n            }\n        });\n    }\n    html(eles, html) {\n        this._put(html, 0, eles);\n    }\n    text(eles, text) {\n        this._put(text, 1, eles);\n    }\n}\n\nclass Base extends domUtils {\n    constructor(options) {\n        Object.assign(this, options);\n        this.render();\n        if (this.eles) {\n            for (var i in this.eles) {\n                if (this.eles.hasOwnProperty(i)) {\n                    this[i] = this.$(this.eles[i]);\n                }\n            }\n        }\n        super();\n        this.init();\n        return this;\n    }\n    render() {}\n}\n\nnew Base({\n    init: function() {\n        this.consoleMethods = ['debug', 'error', 'info', 'log', 'warn'];\n        this.fixConsole();\n    },\n    events: {\n        'click .-c-switch': 'switchBtnClick',\n        'click .-c-toolbar': 'toolBarClick'\n    },\n    eles: {\n        logBox: '.-c-content',\n        toolBar: '.-c-toolbar',\n        switchBtn: '.-c-switch'\n    },\n    render: function() {\n        this.el = this.createElement('div', {}, html);\n        this.append(document.body, this.el);\n    },\n    fixConsole: function() {\n        this.consoleMethods.forEach((method) => {\n            var original = window.console[method];\n            window.console[method] = (...args) => {\n                this.pushLog(args);\n                original.apply(console, args);\n            };\n        });\n    },\n    pushLog: function(msg) {\n        var log = this.createElement('div', {\n            class: '-c-log'\n        });\n        this.text(log, JSON.stringify(msg.join(' ')).slice(1, -1));\n        this.append(this.logBox, log);\n    },\n    switchBtnClick: function() {\n        this.show(this.logBox, this.toolBar).hide(this.switchBtn);\n    },\n    toolBarClick: function(e) {\n        var target = e.target;\n        if (target.classList.contains('-c-clear')) {\n            this.html(this.logBox, '');\n        } else if (target.classList.contains('-c-hide')) {\n            this.hide(this.logBox, this.toolBar).show(this.switchBtn);\n        }\n    }\n});\n"],"names":["this","super","html"],"mappings":"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"}